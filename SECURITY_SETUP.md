# üîí –£—Å–∏–ª–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –®–∞–≥ 1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ RLS –ø–æ–ª–∏—Ç–∏–∫ –≤ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://supabase.com/dashboard/project/orrkwxgfoafyenudouqh
2. –í –º–µ–Ω—é —Å–ª–µ–≤–∞ –≤—ã–±–µ—Ä–∏—Ç–µ **SQL Editor**
3. –ù–∞–∂–º–∏—Ç–µ **"New query"**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase_security_migration.sql`
5. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor –∏ –Ω–∞–∂–º–∏—Ç–µ **"Run"**

–≠—Ç–æ –¥–æ–±–∞–≤–∏—Ç:
- ‚úÖ **–ó–∞—â–∏—Ç—É –æ—Ç –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** (—Ç–æ–ª—å–∫–æ authenticated –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- ‚úÖ **–õ–∏–º–∏—Ç 1000 —Ç–æ–≤–∞—Ä–æ–≤** –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
- ‚úÖ **–õ–∏–º–∏—Ç 100 –∫–∞—Ç–µ–≥–æ—Ä–∏–π** –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫** (–Ω–∞–∑–≤–∞–Ω–∏–µ ‚â§ 200 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞** (–Ω–µ–ª—å–∑—è –≤–≤–µ—Å—Ç–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ)

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Rate Limiting (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –í Supabase Dashboard –≤—ã–±–µ—Ä–∏—Ç–µ **Authentication** ‚Üí **Rate Limits**
2. –í–∫–ª—é—á–∏—Ç–µ:
   - **Email sends**: 4 requests/hour
   - **SMS sends**: 4 requests/hour
   - **Password reset**: 3 requests/hour

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–∞–π—Ç–æ–≤)

1. –í Dashboard: **Settings** ‚Üí **API**
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **"CORS Configuration"**
3. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω –≤ whitelist:
   ```
   https://code1x5.ru
   https://1x5.github.io
   ```
4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ**

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. –í–æ–π—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä ‚Üí –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å ‚úÖ
3. –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Console ‚Üí –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–ø—Ä–æ—Å—ã

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, RLS –∑–∞—â–∏—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ!

---

## ‚ö†Ô∏è –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨:

### –î–æ:
```sql
CREATE POLICY "Users can view own items" ON items
  FOR SELECT USING (auth.uid() = user_id);
```

### –ü–æ—Å–ª–µ:
```sql
CREATE POLICY "Users can view own items" ON items
  FOR SELECT 
  TO authenticated  -- –¢–û–õ–¨–ö–û –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ!
  USING (auth.uid() = user_id);
```

**–†–∞–∑–Ω–∏—Ü–∞:** —Ç–µ–ø–µ—Ä—å `anon` –∫–ª—é—á –Ω–µ –º–æ–∂–µ—Ç –æ–±–æ–π—Ç–∏ –∑–∞—â–∏—Ç—É, —Ç–æ–ª—å–∫–æ `authenticated` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Å–µ—Å—Å–∏–µ–π.

---

## üéØ –£—Ä–æ–≤–µ–Ω—å –∑–∞—â–∏—Ç—ã

| –ê—Å–ø–µ–∫—Ç | –î–æ | –ü–æ—Å–ª–µ |
|--------|-----|-------|
| –ê–Ω–æ–Ω–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø | ‚ùå –ï—Å—Ç—å —Ä–∏—Å–∫ | ‚úÖ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω |
| –°–ø–∞–º –∑–∞–ø—Ä–æ—Å–æ–≤ | ‚ùå –ù–µ—Ç –ª–∏–º–∏—Ç–æ–≤ | ‚úÖ –ï—Å—Ç—å –ª–∏–º–∏—Ç—ã |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ –ü–æ–ª–Ω–∞—è |
| CORS –∑–∞—â–∏—Ç–∞ | ‚ö†Ô∏è –°–ª–∞–±—ã–π | ‚úÖ –£—Å–∏–ª–µ–Ω–∞ |

---

## üöÄ –ì–æ—Ç–æ–≤–æ!

–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –Ω–∞ —É—Ä–æ–≤–Ω–µ **production-ready** –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

